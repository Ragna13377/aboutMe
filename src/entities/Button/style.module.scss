@import '@shared/styles/animations';

$button-width: 150px;
$button-height: 40px;
$error-color: #800000;
$disabled-color: #818181;

.button {
	position: relative;
	inset-block-start: calc(20px + $button-height * 0.5);
	inset-inline-start: calc(100% - $button-width);
	z-index: 1;
	display: flex;
	justify-content: space-between;
	align-items: center;
	min-width: $button-width;
	min-height: $button-height;
	padding: 0 15px;
	overflow: hidden;
	font-weight: 900;
	background-color: var(--console-color);
	border: none;
	cursor: pointer;

	&::after {
		content: 'â‡’';
	}

	&::before {
		content: '';
		position: absolute;
		inset: 0;
		translate: 98% 0;
		transition: translate 0s linear;
	}

	&:focus-visible {
		outline: 5px solid black;
	}
}

.active {
	color: var(--console-text);
	clip-path: polygon(50% 0%, 100% 0, 100% 100%, 10% 100%, 0 70%, 0 0);

	&::before {
		background: var(--console-text);
	}

	&:hover, &:active {
		&::after {
			animation: flickering 0.8s infinite;
		}
	}

	&:active {
		&::before {
			mix-blend-mode: soft-light;
			transition: translate 0.6s linear;
			translate: 0 0;
		}
	}
}

.error {
	color: $error-color;
	box-shadow: inset 0 0 6px 0 red;
	transition: box-shadow 5s linear;
	animation: error 5s infinite;
	clip-path: polygon(0 0, 50% 0, 55% 10%, 48% 20%, 55% 30%, 45% 40%, 55% 50%, 45% 60%, 52% 70%, 40% 80%, 48% 90%, 45% 100%, 80% 100%, 75% 90%, 80% 80%, 70% 70%, 77% 60%, 65% 50%, 70% 40%, 60% 30%, 65% 20%, 60% 10%, 100% 0, 100% 100%, 10% 100%, 0 70%, 0 0);

	&::before {
		background: $error-color;
	}

}

.disabled {
	color: $disabled-color;
	box-shadow: inset 0 0 6px 0 grey;
	cursor: default;
	filter: grayscale(1);
	clip-path: polygon(0 0, 50% 0, 55% 10%, 48% 20%, 55% 30%, 45% 40%, 55% 50%, 45% 60%, 52% 70%, 40% 80%, 48% 90%, 45% 100%, 80% 100%, 75% 90%, 80% 80%, 70% 70%, 77% 60%, 65% 50%, 70% 40%, 60% 30%, 65% 20%, 60% 10%, 100% 0, 100% 100%, 10% 100%, 0 70%, 0 0);

	&::before {
		background: $disabled-color;
	}
}

@keyframes error {
	0%, 5%, 50%, 99% {
		color: #a90000;
		text-shadow: 0 0 2px #a90000;
	}

	2%, 6%, 51%, 100% {
		color: $error-color;
		text-shadow: 0 0 0 #a90000;
	}
}